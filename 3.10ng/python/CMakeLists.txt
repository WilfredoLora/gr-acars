#
# SPDX-License-Identifier: GPL-3.0-or-later
#
# CMakeLists.txt for the python/ directory of gr-acars
#

########################################################################
# Find and verify Python3
########################################################################
include(GrPython)
# If using newer CMake with FindPython3
#  if(NOT Python3_Interpreter_FOUND)
#      return()
#  endif()
#
# If using older CMake with FindPythonInterp
if(NOT PYTHONINTERP_FOUND)
    return()
endif()

########################################################################
# Subdirectory for C++ â†’ Python bindings
########################################################################
# Typically holds SWIG or pybind11 code generated by gr_modtool
# If it doesn't exist or you're not using C++ bindings, comment it out
add_subdirectory(bindings)

########################################################################
# Install pure-Python files
########################################################################
GR_PYTHON_INSTALL(
    FILES
        __init__.py
    DESTINATION ${GR_PYTHON_DIR}/acars
)

########################################################################
# Handle the unit tests
########################################################################
include(GrTest)

# We link to our gnuradio-acars library for tests
set(GR_TEST_TARGET_DEPS gnuradio-acars)

# Create a package directory for tests to import from
# (copies all contents of this python/ folder into a test-specific directory)
add_custom_target(
  copy_module_for_tests ALL
  COMMAND
    ${CMAKE_COMMAND} -E copy_directory
      ${CMAKE_CURRENT_SOURCE_DIR}
      ${CMAKE_BINARY_DIR}/test_modules/acars/
)
